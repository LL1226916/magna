{"version":3,"sources":["webpack:///./node_modules/core-js/modules/es.string.iterator.js","webpack:///./src/components/form/FormEdit.vue?b524","webpack:///src/components/form/FormEdit.vue","webpack:///./src/components/form/FormEdit.vue?a358","webpack:///./src/components/form/FormEdit.vue","webpack:///./src/common/service.js"],"names":["charAt","InternalStateModule","defineIterator","STRING_ITERATOR","setInternalState","set","getInternalState","getterFor","String","iterated","this","type","string","index","point","state","length","value","undefined","done","render","_vm","_h","$createElement","_c","_self","staticClass","attrs","_v","staticStyle","directives","name","rawName","form","expression","on","saveForm","_m","$event","deleteForm","class","invalidName","domProps","target","composing","$set","_id","createdAt","_s","moment","Number","format","createdName","updatedAt","updatedName","staticRenderFns","data","utils","forms","config","created","mounted","Formio","use","FormioContrib","builder","methods","refresh","id","$route","query","Promise","resolve","reject","service","formData","$","modal","JSON","parse","stringify","_etag","components","stamp","updatedBy","user","createdBy","component","axios","interceptors","request","NProgress","start","response","error","getUsers","ids","requests","map","requestBpmn","all","getItem","result","url","get","then","item","indexOf","push","find","toLowerCase","firstName","lastName","trim","getItems","filter","sort","settings","dataType","method","params","items","_embedded","forEach","saveItem","message","headers","deleteItem","path","bpmnUrl","sessionStorage","upload","uploadUrl","getProcessTemplate"],"mappings":"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","file":"js/chunk-58e1bacb.0529bc83.js","sourcesContent":["'use strict';\nvar charAt = require('../internals/string-multibyte').charAt;\nvar InternalStateModule = require('../internals/internal-state');\nvar defineIterator = require('../internals/define-iterator');\n\nvar STRING_ITERATOR = 'String Iterator';\nvar setInternalState = InternalStateModule.set;\nvar getInternalState = InternalStateModule.getterFor(STRING_ITERATOR);\n\n// `String.prototype[@@iterator]` method\n// https://tc39.github.io/ecma262/#sec-string.prototype-@@iterator\ndefineIterator(String, 'String', function (iterated) {\n  setInternalState(this, {\n    type: STRING_ITERATOR,\n    string: String(iterated),\n    index: 0\n  });\n// `%StringIteratorPrototype%.next` method\n// https://tc39.github.io/ecma262/#sec-%stringiteratorprototype%.next\n}, function next() {\n  var state = getInternalState(this);\n  var string = state.string;\n  var index = state.index;\n  var point;\n  if (index >= string.length) return { value: undefined, done: true };\n  point = charAt(string, index);\n  state.index += point.length;\n  return { value: point, done: false };\n});\n","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"row\"},[_c('div',{staticClass:\"col-lg-12 col-xl-12 col-md-12\"},[_c('div',{staticClass:\"panel\",attrs:{\"id\":\"panel-1\"}},[_c('div',{staticClass:\"panel-hdr\"},[_c('h2',[_vm._v(\"表单属性\")]),_c('div',{staticClass:\"panel-toolbar\",staticStyle:{\"padding-right\":\"1em\"}},[_c('a',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.form._id),expression:\"form._id\"}],staticClass:\"waves-effect waves-themed text-danger\",staticStyle:{\"margin-right\":\"24px\"},attrs:{\"href\":\"javascript:void(0);\",\"data-toggle\":\"modal\",\"data-target\":\"#deleteModal\"}},[_c('i',{staticClass:\"fal fa-fw fa-trash-alt mr-2\"}),_vm._v(\"删除 \")]),_c('a',{staticClass:\"waves-effect waves-themed\",staticStyle:{\"margin-right\":\"24px\"},attrs:{\"href\":\"javascript:void(0);\"},on:{\"click\":_vm.saveForm}},[_c('i',{staticClass:\"fal fa-fw fa-save mr-1\"}),_vm._v(\"保存 \")]),_vm._m(0),_vm._m(1)]),_c('div',{staticClass:\"modal fade\",attrs:{\"id\":\"deleteModal\",\"tabindex\":\"-1\",\"role\":\"dialog\",\"aria-labelledby\":\"deleteModalTitle\",\"aria-hidden\":\"true\"}},[_c('div',{staticClass:\"modal-dialog modal-dialog-centered\",attrs:{\"role\":\"document\"}},[_c('div',{staticClass:\"modal-content\"},[_vm._m(2),_c('div',{staticClass:\"modal-body\"},[_vm._v(\"是否删除当前记录？ 请注意，此操作不可逆。\")]),_c('div',{staticClass:\"modal-footer\"},[_c('button',{staticClass:\"btn btn-secondary\",attrs:{\"type\":\"button\",\"data-dismiss\":\"modal\"}},[_vm._v(\"取消\")]),_c('button',{staticClass:\"btn btn-warning\",attrs:{\"type\":\"button\"},on:{\"click\":function($event){return _vm.deleteForm()}}},[_c('i',{staticClass:\"fal fa-fw fa-trash-alt mr-2\"}),_vm._v(\"删除 \")])])])])])]),_c('div',{staticClass:\"panel-container show\"},[_c('div',{staticClass:\"panel-content\"},[_c('div',{staticClass:\"row\"},[_c('div',{staticClass:\"col-3 mt-2\"},[_c('div',{staticClass:\"form-group\"},[_vm._m(3),_c('input',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.form.name),expression:\"form.name\"}],staticClass:\"form-control form-control-sm\",class:{'is-invalid': _vm.invalidName},attrs:{\"type\":\"text\",\"id\":\"formName\",\"required\":\"\"},domProps:{\"value\":(_vm.form.name)},on:{\"input\":function($event){if($event.target.composing){ return; }_vm.$set(_vm.form, \"name\", $event.target.value)}}})])]),_c('div',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.form._id && _vm.form.createdAt),expression:\"form._id && form.createdAt\"}],staticClass:\"col-3 mt-2\"},[_c('label',{staticClass:\"form-label fw-300\"},[_c('i',{staticClass:\"fal fa-fw fa-calendar-day mr-2\"}),_c('span',[_vm._v(_vm._s(_vm.moment(Number(_vm.form.createdAt)).format('YYYY-MM-DD HH:mm')))])]),_vm._v(\" \"),_c('label',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.form._id),expression:\"form._id\"}],staticClass:\"form-label fw-300\",attrs:{\"for\":\"simpleinput\"}},[_c('i',{staticClass:\"fal fa-fw fa-user-circle mr-2\"}),_c('span',[_vm._v(_vm._s(_vm.form.createdName))])])]),_c('div',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.form._id && _vm.form.updatedAt),expression:\"form._id && form.updatedAt\"}],staticClass:\"col-3 mt-2\"},[_c('label',{staticClass:\"form-label fw-300\"},[_c('i',{staticClass:\"fal fa-fw fa-calendar-day mr-2\"}),_c('span',[_vm._v(_vm._s(_vm.moment(Number(_vm.form.updatedAt)).format('YYYY-MM-DD HH:mm')))])]),_vm._v(\" \"),_c('label',{staticClass:\"form-label fw-300\"},[_c('i',{staticClass:\"fal fa-fw fa-user-circle mr-2\"}),_c('span',[_vm._v(_vm._s(_vm.form.updatedName))])])])])])])])]),_vm._m(4)])}\nvar staticRenderFns = [function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('button',{staticClass:\"btn btn-panel bg-transparent fs-xl w-auto h-auto rounded-0 waves-effect waves-themed\",attrs:{\"data-action\":\"panel-collapse\",\"data-toggle\":\"tooltip\",\"data-offset\":\"0,10\",\"data-original-title\":\"Collapse\"}},[_c('i',{staticClass:\"fal fa-fw fa-minus\"})])},function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('button',{staticClass:\"btn btn-panel bg-transparent fs-xl w-auto h-auto rounded-0 waves-effect waves-themed\",attrs:{\"data-action\":\"panel-fullscreen\",\"data-toggle\":\"tooltip\",\"data-offset\":\"0,10\",\"data-original-title\":\"Fullscreen\"}},[_c('i',{staticClass:\"fal fa-fw fa-expand\"})])},function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"modal-header\"},[_c('h5',{staticClass:\"modal-title\",attrs:{\"id\":\"deleteModalTitle\"}},[_vm._v(\"删除记录\")]),_c('button',{staticClass:\"close\",attrs:{\"type\":\"button\",\"data-dismiss\":\"modal\",\"aria-label\":\"Close\"}},[_c('span',{attrs:{\"aria-hidden\":\"true\"}},[_vm._v(\"×\")])])])},function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('label',{staticClass:\"form-label\",attrs:{\"for\":\"formName\"}},[_vm._v(\" 名称 \"),_c('i',{staticClass:\"fal fa-fw fa-asterisk text-danger ml-2\"})])},function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"col-lg-12 col-xl-12 col-md-12\"},[_c('div',{staticClass:\"panel\",attrs:{\"id\":\"panel-preview\"}},[_c('div',{staticClass:\"panel-hdr\"},[_c('h2',[_vm._v(\"拖拽编辑\")]),_c('div',{staticClass:\"panel-toolbar\"},[_c('button',{staticClass:\"btn btn-panel bg-transparent fs-xl w-auto h-auto rounded-0 waves-effect waves-themed\",attrs:{\"data-action\":\"panel-collapse\",\"data-toggle\":\"tooltip\",\"data-offset\":\"0,10\",\"data-original-title\":\"Collapse\"}},[_c('i',{staticClass:\"fal fa-fw fa-minus\"})]),_c('button',{staticClass:\"btn btn-panel bg-transparent fs-xl w-auto h-auto rounded-0 waves-effect waves-themed\",attrs:{\"data-action\":\"panel-fullscreen\",\"data-toggle\":\"tooltip\",\"data-offset\":\"0,10\",\"data-original-title\":\"Fullscreen\"}},[_c('i',{staticClass:\"fal fa-fw fa-expand\"})])])]),_c('div',{staticClass:\"panel-container show\"},[_c('div',{staticClass:\"panel-content\"},[_c('div',{staticClass:\"row\"},[_c('div',{staticClass:\"col-lg-12 col-xl-12 col-md-12\",attrs:{\"id\":\"builder\"}})])])])])])}]\n\nexport { render, staticRenderFns }","<template>\n  <div class=\"row\">\n    <div class=\"col-lg-12 col-xl-12 col-md-12\">\n      <div id=\"panel-1\" class=\"panel\">\n        <div class=\"panel-hdr\">\n          <h2>表单属性</h2>\n          <div class=\"panel-toolbar\" style=\"padding-right: 1em;\">\n            <a\n              href=\"javascript:void(0);\"\n              data-toggle=\"modal\"\n              data-target=\"#deleteModal\"\n              class=\"waves-effect waves-themed text-danger\"\n              style=\"margin-right: 24px;\"\n              v-show=\"form._id\"\n            >\n              <i class=\"fal fa-fw fa-trash-alt mr-2\"></i>删除\n            </a>\n            <a\n              href=\"javascript:void(0);\"\n              v-on:click=\"saveForm\"\n              class=\"waves-effect waves-themed\"\n              style=\"margin-right: 24px;\"\n            >\n              <i class=\"fal fa-fw fa-save mr-1\"></i>保存\n            </a>\n            <button\n              class=\"btn btn-panel bg-transparent fs-xl w-auto h-auto rounded-0 waves-effect waves-themed\"\n              data-action=\"panel-collapse\"\n              data-toggle=\"tooltip\"\n              data-offset=\"0,10\"\n              data-original-title=\"Collapse\"\n            >\n              <i class=\"fal fa-fw fa-minus\"></i>\n            </button>\n            <button\n              class=\"btn btn-panel bg-transparent fs-xl w-auto h-auto rounded-0 waves-effect waves-themed\"\n              data-action=\"panel-fullscreen\"\n              data-toggle=\"tooltip\"\n              data-offset=\"0,10\"\n              data-original-title=\"Fullscreen\"\n            >\n              <i class=\"fal fa-fw fa-expand\"></i>\n            </button>\n          </div>\n          <div\n            class=\"modal fade\"\n            id=\"deleteModal\"\n            tabindex=\"-1\"\n            role=\"dialog\"\n            aria-labelledby=\"deleteModalTitle\"\n            aria-hidden=\"true\"\n          >\n            <div class=\"modal-dialog modal-dialog-centered\" role=\"document\">\n              <div class=\"modal-content\">\n                <div class=\"modal-header\">\n                  <h5 class=\"modal-title\" id=\"deleteModalTitle\">删除记录</h5>\n                  <button type=\"button\" class=\"close\" data-dismiss=\"modal\" aria-label=\"Close\">\n                    <span aria-hidden=\"true\">&times;</span>\n                  </button>\n                </div>\n                <div class=\"modal-body\">是否删除当前记录？ 请注意，此操作不可逆。</div>\n                <div class=\"modal-footer\">\n                  <button type=\"button\" class=\"btn btn-secondary\" data-dismiss=\"modal\">取消</button>\n                  <button type=\"button\" v-on:click=\"deleteForm()\" class=\"btn btn-warning\">\n                    <i class=\"fal fa-fw fa-trash-alt mr-2\"></i>删除\n                  </button>\n                </div>\n              </div>\n            </div>\n          </div>\n        </div>\n        <div class=\"panel-container show\">\n          <div class=\"panel-content\">\n            <div class=\"row\">\n              <div class=\"col-3 mt-2\">\n                <div class=\"form-group\">\n                  <label class=\"form-label\" for=\"formName\">\n                    名称\n                    <i class=\"fal fa-fw fa-asterisk text-danger ml-2\"></i>\n                  </label>\n                  <input\n                    type=\"text\"\n                    id=\"formName\"\n                    class=\"form-control form-control-sm\"\n                    :class=\"{'is-invalid': invalidName}\"\n                    v-model=\"form.name\"\n                    required\n                  />\n                </div>\n              </div>\n              <div class=\"col-3 mt-2\" v-show=\"form._id && form.createdAt\">\n                <label class=\"form-label fw-300\">\n                  <i class=\"fal fa-fw fa-calendar-day mr-2\"></i>\n                  <span>{{moment(Number(form.createdAt)).format('YYYY-MM-DD HH:mm')}}</span>\n                </label>&nbsp;\n                <label class=\"form-label fw-300\" for=\"simpleinput\" v-show=\"form._id\">\n                  <i class=\"fal fa-fw fa-user-circle mr-2\"></i>\n                  <span>{{form.createdName}}</span>\n                </label>\n              </div>\n              <div class=\"col-3 mt-2\" v-show=\"form._id && form.updatedAt\">\n                <label class=\"form-label fw-300\">\n                  <i class=\"fal fa-fw fa-calendar-day mr-2\"></i>\n                  <span>{{moment(Number(form.updatedAt)).format('YYYY-MM-DD HH:mm')}}</span>\n                </label>\n                &nbsp;\n                <label class=\"form-label fw-300\">\n                  <i class=\"fal fa-fw fa-user-circle mr-2\"></i>\n                  <span>{{form.updatedName}}</span>\n                </label>\n              </div>\n              <!-- <div class=\"col-3 mt-2\">\n                      <div class=\"form-group\">\n                        <label class=\"form-label\" for=\"formType\">类型<i class=\"fal fa-fw fa-asterisk text-danger ml-2\"></i></label>\n                        <select class=\"form-control form-control-sm\" id=\"formType\">\n                          <option>主数据</option>\n                          <option>问卷</option>\n                          <option>业务表单</option>\n                        </select>\n                      </div>\n              </div>-->\n            </div>\n          </div>\n        </div>\n      </div>\n    </div>\n    <div class=\"col-lg-12 col-xl-12 col-md-12\">\n      <div id=\"panel-preview\" class=\"panel\">\n        <div class=\"panel-hdr\">\n          <h2>拖拽编辑</h2>\n          <div class=\"panel-toolbar\">\n            <button\n              class=\"btn btn-panel bg-transparent fs-xl w-auto h-auto rounded-0 waves-effect waves-themed\"\n              data-action=\"panel-collapse\"\n              data-toggle=\"tooltip\"\n              data-offset=\"0,10\"\n              data-original-title=\"Collapse\"\n            >\n              <i class=\"fal fa-fw fa-minus\"></i>\n            </button>\n            <button\n              class=\"btn btn-panel bg-transparent fs-xl w-auto h-auto rounded-0 waves-effect waves-themed\"\n              data-action=\"panel-fullscreen\"\n              data-toggle=\"tooltip\"\n              data-offset=\"0,10\"\n              data-original-title=\"Fullscreen\"\n            >\n              <i class=\"fal fa-fw fa-expand\"></i>\n            </button>\n          </div>\n        </div>\n        <div class=\"panel-container show\">\n          <div class=\"panel-content\">\n            <div class=\"row\">\n              <div class=\"col-lg-12 col-xl-12 col-md-12\" id=\"builder\"></div>\n            </div>\n          </div>\n        </div>\n      </div>\n    </div>\n  </div>\n</template>\n\n<script>\nimport config from \"@/common/config\";\nimport utils from \"@/common/utils.js\";\nimport service from \"@/common/service\";\nimport moment from \"moment\";\nexport default {\n  // el: \"#app\",\n\n  data() {\n    return utils.createModel({\n      forms: [],\n      form: {},\n      moment: moment,\n      config: config,\n      invalidName: false,\n    });\n  },\n  created: function () {\n    // $(\"#uploadMenu\").hide();\n    // $(\"#formsMenu\").show();\n  },\n  mounted() {\n    Formio.use(FormioContrib);\n    Formio.builder(\n      document.getElementById(\"builder\"),\n      {\n        language: \"ch\",\n        i18n: config.i18n,\n      },\n      { noDefaultSubmitButton: true, language: \"ch\", i18n: config.i18n }\n    ).then((formBuilder) => {\n      this.builder = formBuilder;\n      this.refresh();\n    });\n  },\n  methods: {\n    refresh: function () {\n      var id = this.$route.query && this.$route.query.id;\n      this.form._id = id;\n      this.invalidName = false;\n\n      return new Promise(function (resolve, reject) {\n        if (id) {\n          service.getItem(\"form\", id).then((form) => {\n            resolve(form.data);\n          });\n        } else {\n          resolve({});\n        }\n      }).then((data) => {\n        this.form = data;\n        var formData = this.form.formData || [];\n        this.builder.webform.setForm({ components: formData });\n      });\n      // if (id) {\n      //  service.getItem(\"form\",id).then(form => {\n      //     this.form = form.data;\n      //   });\n      // } else {\n      //   this.form = {};\n      // }\n    },\n\n    deleteForm() {\n      if (!this.form._id) {\n        return;\n      }\n      service.deleteItem(\"form\", this.form._id).then((result) => {\n        //this.refresh();\n        $(\"#deleteModal\").modal(\"hide\");\n        this.$router.push({\n          name: \"forms\",\n        });\n      });\n    },\n\n    saveForm() {\n      this.invalidName = false;\n      if (!this.form.name) {\n        this.invalidName = true;\n        return;\n      }\n      var form = JSON.parse(JSON.stringify(this.form));\n      delete form._etag;\n\n      form.formData = this.builder.form.components;\n      var stamp = moment().format(\"x\");\n      if (!form._id) {\n        form.type = \"form\";\n        form.createdBy = this.user.id;\n        form.createdAt = stamp;\n        form._id = stamp;\n      } else {\n        form.updatedBy = this.user.id;\n        form.updatedAt = stamp;\n      }\n      var id = form._id;\n      delete form.createdName;\n      delete form.updatedName;\n      service.saveItem(\"form\", form).then(\n        (result) => {\n          if (!this.form._id) {\n            this.$router.push({\n              name: \"formEdit\",\n              query: { id: id },\n            });\n          }\n\n          this.$parent.$emit(\"message\", {\n            type: \"success\",\n            title: \"保存表单\",\n            message: \"保存成功。\",\n          });\n          this.refresh();\n        },\n        (result) => {\n          this.invalidName = true;\n          this.$parent.$emit(\"message\", {\n            type: \"error\",\n            title: \"保存流程\",\n            message: result.message,\n          });\n        }\n      );\n    },\n  },\n};\n</script>\n\n<style scoped>\n</style>\n\n\n","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./FormEdit.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./FormEdit.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./FormEdit.vue?vue&type=template&id=4bf48122&scoped=true&\"\nimport script from \"./FormEdit.vue?vue&type=script&lang=js&\"\nexport * from \"./FormEdit.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"4bf48122\",\n  null\n  \n)\n\nexport default component.exports","import config from \"./config\";\nimport axios from 'axios';\nimport NProgress from 'nprogress' // progress bar\n\naxios.interceptors.request.use(config => {\n    NProgress.start();\n    return config;\n});\naxios.interceptors.response.use(config => {\n    NProgress.done();\n    return config;\n}, error => {\n    NProgress.done();\n    return Promise.reject(error.response);\n});\n\nexport default {\n    getUsers(ids) {\n        var requests = ids.map(id => this.requestBpmn(\n            \"identity/users/\" + id\n        ));\n        return Promise.all(requests);\n    },\n    getItem(type, id) {\n        var result;\n        var url = config[type + \"Url\"];\n        return axios.get(url + id).then(response => {\n            result = response;\n            var item = result.data;\n            var ids = [];\n            if (item.createdBy && ids.indexOf(item.createdBy) < 0) {\n                ids.push(item.createdBy);\n            }\n            if (item.updatedBy && ids.indexOf(item.updatedBy) < 0) {\n                ids.push(item.updatedBy);\n            }\n            return this.getUsers(ids);\n        }).then(response => {\n            var item = result.data;\n            var data = response.map(item => item.data);\n            if (item.createdBy) {\n                var user = data.find(user => user.id.toLowerCase() === item.createdBy.toLowerCase());\n                item.createdName = (user.firstName + \" \" + user.lastName).trim();\n            }\n            if (item.updatedBy) {\n                user = data.find(user => user.id.toLowerCase() === item.updatedBy.toLowerCase());\n                item.updatedName = (user.firstName + \" \" + user.lastName).trim();\n            }\n\n            return Promise.resolve(result);\n        });\n    },\n    getItems(type, data) {\n        var url = config[type + \"Url\"];\n        return new Promise((resolve, reject) => {\n            data = data || {};\n            data.filter = data.filter || {};\n            data.filter.type = type;\n            data.filter = JSON.stringify(data.filter);\n\n            if (data.sort) {\n                data.sort = JSON.stringify(data.sort);\n            }\n\n            var settings = {\n                dataType: \"json\",\n                url: url,\n                method: \"get\",\n                params: data\n            };\n            var items = [];\n            return axios(settings).then(response => {\n                items = response.data._embedded;\n                var ids = [];\n                items.forEach(item => {\n                    if (item.createdBy && ids.indexOf(item.createdBy) < 0) {\n                        ids.push(item.createdBy);\n                    }\n                    if (item.updatedBy && ids.indexOf(item.updatedBy) < 0) {\n                        ids.push(item.updatedBy);\n                    }\n                });\n                return this.getUsers(ids);\n                //   resolve(items);\n            }).then(response => {\n                items.forEach(item => {\n                    var data = response.map(item => item.data);\n                    if (item.createdBy) {\n                        var user = data.find(user => user.id.toLowerCase() === item.createdBy.toLowerCase());\n                        item.createdName = (user.firstName + \" \" + user.lastName).trim();\n                    }\n                    if (item.updatedBy) {\n                        user = data.find(user => user.id.toLowerCase() === item.updatedBy.toLowerCase());\n                        item.updatedName = (user.firstName + \" \" + user.lastName).trim();\n                    }\n\n                });\n                resolve(items);\n            });\n        });\n    },\n\n    saveItem(type, item) {\n      return  this.getItems(type, {\n            filter: {\n                name: item.name,\n                _id: {\n                    \"$ne\": item._id\n                }\n            }\n        }).then(response => {\n            if (response && response.length) {\n                return Promise.reject({\n                    message: \"名称\\\"\" + item.name + \"\\\"已存在。\"\n                });\n            } else {\n                return axios({\n                    dataType: \"json\",\n                    url: config[type + \"Url\"],\n                    headers: {\n                        \"Content-Type\": \"application/json\"\n                    },\n                    method: \"post\",\n                    data: item\n                });\n            }\n\n        });\n    },\n    deleteItem(type, id) {\n        var url = config[type + \"Url\"];\n        url += id;\n        var settings = {\n            dataType: \"text\",\n            url: url,\n            method: \"delete\",\n            data: {}\n        };\n\n        return axios(settings);\n    },\n    requestBpmn(path, type, data) {\n        var type = type || \"GET\";\n        var url = config.bpmnUrl + (path || \"\");\n        var settings = {\n            dataType: \"json\",\n            url: url,\n            headers: {\n                \"Authorization\": sessionStorage.getItem(\"token\"),\n                \"Content-Type\": \"application/json\"\n            },\n            method: type\n\n        };\n        if (type === \"GET\") {\n            settings.params = data;\n        } else {\n            settings.data = data;\n        }\n\n        return axios(settings);\n    },\n    upload(formData) {\n        return axios({\n            method: \"post\",\n            url: config.uploadUrl + \"upload\",\n            data: formData,\n            headers: {\n                'Content-Type': 'multipart/form-data'\n            }\n        });\n    },\n    getProcessTemplate(type) {\n        return axios({\n            method: \"get\",\n            url: \"template/\" + type + \".bpmn\",\n            headers: {\n                'Content-Type': 'text'\n            }\n        });\n    }\n}\n"],"sourceRoot":""}