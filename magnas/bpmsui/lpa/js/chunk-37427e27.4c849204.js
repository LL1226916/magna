(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-37427e27"],{"3ca3":function(t,e,a){"use strict";var r=a("6547").charAt,n=a("69f3"),s=a("7dd0"),i="String Iterator",o=n.set,d=n.getterFor(i);s(String,"String",(function(t){o(this,{type:i,string:String(t),index:0})}),(function(){var t,e=d(this),a=e.string,n=e.index;return n>=a.length?{value:void 0,done:!0}:(t=r(a,n),e.index+=t.length,{value:t,done:!1})}))},"57da":function(t,e,a){"use strict";a.r(e);var r=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"d-flex flex-grow-1 p-0"},[a("div",{staticClass:"d-flex flex-column flex-grow-1 bg-white"},[a("div",{staticClass:"flex-grow-0"}),a("div",{staticClass:"flex-wrap align-items-center flex-grow-1 position-relative bg-gray-100"},[a("div",{staticClass:"position-absolute pos-top pos-bottom w-100 custom-scroll"},[a("div",{staticClass:"d-flex h-100 flex-column"},[a("div",{staticClass:"row"},[a("div",{staticClass:"col-8 pr-0"},[a("div",{staticClass:"card m-1"},[a("div",{staticClass:"card-body"},[a("h5",{staticClass:"card-title fw-300"},[t._v("我的LPA任务")]),a("a",{staticClass:"card-text",attrs:{href:"#/tasks"}},[a("span",{staticClass:"mr-4 fw-300"},[a("i",{staticClass:"far fa-fw fa-tasks mr-1"}),t._v("总任务 "),a("span",{staticClass:"ml-2 fw-900"},[t._v(t._s(t.taskCount.all))])]),a("span",{staticClass:"fw-300 text-danger"},[a("i",{staticClass:"far fa-fw fa-alarm-clock mr-1"}),t._v("已超时 "),a("span",{staticClass:"ml-2 fw-900"},[t._v(t._s(t.taskCount.delay))])])])])])]),t._m(0)])])])])])])},n=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"col-4 pl-0"},[a("div",{staticClass:"card m-1"},[a("div",{staticClass:"card-body"},[a("h5",{staticClass:"card-title fw-300"},[t._v("改善提案")]),a("a",{staticClass:"card-text",attrs:{href:"javascript:void(0);"}},[a("span",{staticClass:"mr-4 text-info fw-900"},[a("i",{staticClass:"fal fa-fw fa-plus-square mr-2"}),t._v("创建 ")])])])])])}],s=a("a49b"),i=a("90b9"),o=a("f523"),d=a("f817"),u={data:function(){return i["a"].createModel({moment:d["a"],config:s["a"],taskCount:{all:"",delay:""}})},created:function(){var t=this,e=this.user.id,a={all:{assignee:e,active:!0,nameLike:"%lpa%"},delay:{assignee:e,active:!0,dueBefore:Object(d["a"])().format(),nameLike:"%lpa%"}};o["a"].requestBpmn("runtime/tasks","",a.all).then((function(e){t.taskCount.all=e.data.total})),o["a"].requestBpmn("runtime/tasks","",a.delay).then((function(e){t.taskCount.delay=e.data.total}))},mounted:function(){},methods:{}},c=u,l=c,f=a("2877"),p=Object(f["a"])(l,r,n,!1,null,"dd6ad1f6",null);e["default"]=p.exports},f523:function(t,e,a){"use strict";a("4de4"),a("7db0"),a("4160"),a("c975"),a("d81d"),a("b0c0"),a("d3b7"),a("3ca3"),a("498a"),a("159b"),a("ddb0");var r=a("a49b"),n=a("bc3a"),s=a.n(n),i=a("323e"),o=a.n(i);s.a.interceptors.request.use((function(t){return o.a.start(),t})),s.a.interceptors.response.use((function(t){return o.a.done(),t}),(function(t){return o.a.done(),Promise.reject(t.response)})),e["a"]={getUsers:function(t){var e=this,a=t.map((function(t){return e.requestBpmn("identity/users/"+t)}));return Promise.all(a)},getItem:function(t,e){var a,n=this,i=r["a"][t+"Url"];return s.a.get(i+e).then((function(t){a=t;var e=a.data,r=[];return e.createdBy&&r.indexOf(e.createdBy)<0&&r.push(e.createdBy),e.updatedBy&&r.indexOf(e.updatedBy)<0&&r.push(e.updatedBy),n.getUsers(r)})).then((function(t){var e=a.data,r=t.map((function(t){return t.data}));if(e.createdBy){var n=r.find((function(t){return t.id.toLowerCase()===e.createdBy.toLowerCase()}));e.createdName=(n.firstName+" "+n.lastName).trim()}return e.updatedBy&&(n=r.find((function(t){return t.id.toLowerCase()===e.updatedBy.toLowerCase()})),e.updatedName=(n.firstName+" "+n.lastName).trim()),Promise.resolve(a)}))},getItems:function(t,e){var a=this,n=r["a"][t+"Url"];return new Promise((function(r,i){e=e||{},e.filter=e.filter||{},e.filter.type=t,e.filter=JSON.stringify(e.filter),e.sort&&(e.sort=JSON.stringify(e.sort));var o={dataType:"json",url:n,method:"get",params:e},d=[];return s()(o).then((function(t){d=t.data._embedded;var e=[];return d.forEach((function(t){t.createdBy&&e.indexOf(t.createdBy)<0&&e.push(t.createdBy),t.updatedBy&&e.indexOf(t.updatedBy)<0&&e.push(t.updatedBy)})),a.getUsers(e)})).then((function(t){d.forEach((function(e){var a=t.map((function(t){return t.data}));if(e.createdBy){var r=a.find((function(t){return t.id.toLowerCase()===e.createdBy.toLowerCase()}));e.createdName=(r.firstName+" "+r.lastName).trim()}e.updatedBy&&(r=a.find((function(t){return t.id.toLowerCase()===e.updatedBy.toLowerCase()})),e.updatedName=(r.firstName+" "+r.lastName).trim())})),r(d)}))}))},saveItem:function(t,e){return this.getItems(t,{filter:{name:e.name,_id:{$ne:e._id}}}).then((function(a){return a&&a.length?Promise.reject({message:'名称"'+e.name+'"已存在。'}):s()({dataType:"json",url:r["a"][t+"Url"],headers:{"Content-Type":"application/json"},method:"post",data:e})}))},deleteItem:function(t,e){var a=r["a"][t+"Url"];a+=e;var n={dataType:"text",url:a,method:"delete",data:{}};return s()(n)},requestBpmn:function(t,e,a){e=e||"GET";var n=r["a"].bpmnUrl+(t||""),i={dataType:"json",url:n,headers:{Authorization:sessionStorage.getItem("token"),"Content-Type":"application/json"},method:e};return"GET"===e?i.params=a:i.data=a,s()(i)},upload:function(t){return s()({method:"post",url:r["a"].uploadUrl+"upload",data:t,headers:{"Content-Type":"multipart/form-data"}})},getProcessTemplate:function(t){return s()({method:"get",url:"template/"+t+".bpmn",headers:{"Content-Type":"text"}})},saveLpaDraft:function(t,e){return s()({dataType:"json",url:r["a"][t+"Url"],headers:{"Content-Type":"application/json"},method:"post",data:e})},getLpaDraft:function(t,e){return s()({dataType:"json",url:r["a"][t+"Url"],headers:{"Content-Type":"application/json"},method:"get",params:e,async:!1})}}}}]);
//# sourceMappingURL=chunk-37427e27.4c849204.js.map