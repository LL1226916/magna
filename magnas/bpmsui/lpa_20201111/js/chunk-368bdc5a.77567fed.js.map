{"version":3,"sources":["webpack:///./node_modules/core-js/modules/es.string.iterator.js","webpack:///./src/components/Login.vue?a0af","webpack:///src/components/Login.vue","webpack:///./src/components/Login.vue?3819","webpack:///./src/components/Login.vue","webpack:///./src/common/service.js"],"names":["charAt","InternalStateModule","defineIterator","STRING_ITERATOR","setInternalState","set","getInternalState","getterFor","String","iterated","this","type","string","index","point","state","length","value","undefined","done","render","_vm","_h","$createElement","_c","_self","staticClass","_m","attrs","_v","directives","name","rawName","user","expression","class","validation","domProps","on","$event","target","composing","$set","password","login","staticRenderFns","data","moment","config","created","mounted","localStorage","getItem","methods","allValid","i","valid","trim","false","auth","component","axios","interceptors","request","use","NProgress","start","response","error","Promise","reject","getUsers","ids","requests","map","id","requestBpmn","all","result","url","get","then","item","createdBy","indexOf","push","updatedBy","find","toLowerCase","createdName","firstName","lastName","updatedName","resolve","getItems","filter","JSON","stringify","sort","settings","dataType","method","params","items","_embedded","forEach","saveItem","_id","message","headers","deleteItem","path","bpmnUrl","sessionStorage","upload","formData","uploadUrl","getProcessTemplate"],"mappings":"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","file":"js/chunk-368bdc5a.77567fed.js","sourcesContent":["'use strict';\nvar charAt = require('../internals/string-multibyte').charAt;\nvar InternalStateModule = require('../internals/internal-state');\nvar defineIterator = require('../internals/define-iterator');\n\nvar STRING_ITERATOR = 'String Iterator';\nvar setInternalState = InternalStateModule.set;\nvar getInternalState = InternalStateModule.getterFor(STRING_ITERATOR);\n\n// `String.prototype[@@iterator]` method\n// https://tc39.github.io/ecma262/#sec-string.prototype-@@iterator\ndefineIterator(String, 'String', function (iterated) {\n  setInternalState(this, {\n    type: STRING_ITERATOR,\n    string: String(iterated),\n    index: 0\n  });\n// `%StringIteratorPrototype%.next` method\n// https://tc39.github.io/ecma262/#sec-%stringiteratorprototype%.next\n}, function next() {\n  var state = getInternalState(this);\n  var string = state.string;\n  var index = state.index;\n  var point;\n  if (index >= string.length) return { value: undefined, done: true };\n  point = charAt(string, index);\n  state.index += point.length;\n  return { value: point, done: false };\n});\n","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',[_c('div',{staticClass:\"blankpage-form-field\"},[_c('div',{staticClass:\"card p-4\"},[_vm._m(0),_c('form',{attrs:{\"novalidate\":\"novalidate\",\"onsubmit\":\"return false;\",\"autocomplete\":\"false\"}},[_c('div',{staticClass:\"form-group\"},[_c('label',{staticClass:\"form-label\",attrs:{\"for\":\"name\"}},[_vm._v(\"用户名\")]),_c('input',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.user.name),expression:\"user.name\"}],staticClass:\"form-control\",class:{'is-invalid': !_vm.validation.name},attrs:{\"type\":\"text\",\"id\":\"name\",\"required\":\"\",\"placeholder\":\"用户名\",\"autocomplete\":\"false\"},domProps:{\"value\":(_vm.user.name)},on:{\"input\":function($event){if($event.target.composing){ return; }_vm.$set(_vm.user, \"name\", $event.target.value)}}})]),_c('div',{staticClass:\"form-group\"},[_c('label',{staticClass:\"form-label\",attrs:{\"for\":\"password\"}},[_vm._v(\"密码\")]),_c('input',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.user.password),expression:\"user.password\"}],staticClass:\"form-control\",class:{'is-invalid': !_vm.validation.password},attrs:{\"type\":\"password\",\"id\":\"password\",\"required\":\"\",\"placeholder\":\"密码\",\"autocomplete\":\"false\"},domProps:{\"value\":(_vm.user.password)},on:{\"input\":function($event){if($event.target.composing){ return; }_vm.$set(_vm.user, \"password\", $event.target.value)}}})]),_c('button',{staticClass:\"btn btn-default float-right\",on:{\"click\":function($event){return _vm.login()}}},[_c('i',{staticClass:\"fal fa-fw fa-sign-in text-primary mr-2\"}),_vm._v(\"登录 \")])])])]),_vm._m(1)])}\nvar staticRenderFns = [function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('p',{staticClass:\"mb-4\",attrs:{\"align\":\"center\"}},[_c('img',{attrs:{\"src\":\"img/eorionlogoonly.svg\",\"height\":\"32px\"}})])},function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"modal fade\",attrs:{\"id\":\"errorModal\",\"tabindex\":\"-1\",\"role\":\"dialog\",\"aria-labelledby\":\"errorModalTitle\",\"aria-hidden\":\"true\"}},[_c('div',{staticClass:\"modal-dialog modal-dialog-centered\",attrs:{\"role\":\"document\"}},[_c('div',{staticClass:\"modal-content\"},[_c('div',{staticClass:\"modal-header\"},[_c('h5',{staticClass:\"modal-title\",attrs:{\"id\":\"errorModalTitle\"}},[_vm._v(\"登陆失败\")]),_c('button',{staticClass:\"close\",attrs:{\"type\":\"button\",\"data-dismiss\":\"modal\",\"aria-label\":\"Close\"}},[_c('span',{attrs:{\"aria-hidden\":\"true\"}},[_vm._v(\"×\")])])]),_c('div',{staticClass:\"modal-body\"},[_vm._v(\"登陆失败，用户名或密码错误。\")]),_c('div',{staticClass:\"modal-footer\"},[_c('button',{staticClass:\"btn btn-error\",attrs:{\"type\":\"button\",\"data-dismiss\":\"modal\"}},[_c('i',{staticClass:\"fal fa-fw fa-check mr-2\"}),_vm._v(\"确定 \")])])])])])}]\n\nexport { render, staticRenderFns }","<template>\n  <div>\n    <div class=\"blankpage-form-field\">\n      <div class=\"card p-4\">\n        <p align=\"center\" class=\"mb-4\">\n          <img src=\"img/eorionlogoonly.svg\" height=\"32px\" />\n        </p>\n        <form novalidate=\"novalidate\" onsubmit=\"return false;\" autocomplete=\"false\">\n          <div class=\"form-group\">\n            <label class=\"form-label\" for=\"name\">用户名</label>\n            <input\n              type=\"text\"\n              id=\"name\"\n              class=\"form-control\"\n              required\n              placeholder=\"用户名\"\n              v-model=\"user.name\"\n              autocomplete=\"false\"\n              :class=\"{'is-invalid': !validation.name}\"\n            />\n          </div>\n          <div class=\"form-group\">\n            <label class=\"form-label\" for=\"password\">密码</label>\n            <input\n              type=\"password\"\n              id=\"password\"\n              required\n              class=\"form-control\"\n              placeholder=\"密码\"\n              v-model=\"user.password\"\n              autocomplete=\"false\"\n              :class=\"{'is-invalid': !validation.password}\"\n            />\n          </div>\n\n          <button v-on:click=\"login()\" class=\"btn btn-default float-right\">\n            <i class=\"fal fa-fw fa-sign-in text-primary mr-2\"></i>登录\n          </button>\n        </form>\n      </div>\n    </div>\n\n    <div\n      class=\"modal fade\"\n      id=\"errorModal\"\n      tabindex=\"-1\"\n      role=\"dialog\"\n      aria-labelledby=\"errorModalTitle\"\n      aria-hidden=\"true\"\n    >\n      <div class=\"modal-dialog modal-dialog-centered\" role=\"document\">\n        <div class=\"modal-content\">\n          <div class=\"modal-header\">\n            <h5 class=\"modal-title\" id=\"errorModalTitle\">登陆失败</h5>\n            <button type=\"button\" class=\"close\" data-dismiss=\"modal\" aria-label=\"Close\">\n              <span aria-hidden=\"true\">&times;</span>\n            </button>\n          </div>\n          <div class=\"modal-body\">登陆失败，用户名或密码错误。</div>\n          <div class=\"modal-footer\">\n            <button type=\"button\" class=\"btn btn-error\" data-dismiss=\"modal\">\n              <i class=\"fal fa-fw fa-check mr-2\"></i>确定\n            </button>\n          </div>\n        </div>\n      </div>\n    </div>\n  </div>\n</template>\n\n<script>\nimport config from \"@/common/config\";\n// import utils from \"@/common/utils.js\";\nimport service from \"@/common/service\";\nimport auth from \"@/common/auth\";\nimport moment, { lang } from \"moment\";\nexport default {\n  data() {\n    return {\n      moment: moment,\n      config: config,\n      user: {\n        name: \"\",\n        password: \"\"\n      },\n      validation: {\n        name: true,\n        password: true\n      }\n    };\n  },\n  created: function() {},\n  mounted() {\n    this.user = {\n      name: localStorage.getItem('username') || '',\n      password: localStorage.getItem('password') || ''\n    }\n  },\n  methods: {\n    login() {\n      var allValid = true;\n      for (var i in this.user) {\n        var valid = !!(this.user[i] || \"\").trim();\n        this.validation[i] = valid;\n        if (!valid) {\n          allValid.false;\n        }\n      }\n      if (!allValid) {\n        return;\n      }\n      auth.login(this.user.name, this.user.password).then(\n        user => {\n          localStorage.setItem('username',this.user.name)\n          localStorage.setItem('password',this.user.password)\n          if (this.$route.query.redirect && this.$route.query.redirect.indexOf('processCreate') != -1){\n            this.$router.push({ path: this.$route.query.redirect + '&businessKey=' + this.$route.query.businessKey });\n          }else {\n            this.$router.push({ name: \"home\" });\n          }\n        },\n        error => {\n          $(\"#errorModal\").modal(\"show\");\n        }\n      );\n    }\n  }\n};\n</script>\n\n<style scoped>\n</style>\n\n\n","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Login.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Login.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./Login.vue?vue&type=template&id=ac58906e&scoped=true&\"\nimport script from \"./Login.vue?vue&type=script&lang=js&\"\nexport * from \"./Login.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"ac58906e\",\n  null\n  \n)\n\nexport default component.exports","import config from \"./config\";\nimport axios from 'axios';\nimport NProgress from 'nprogress' // progress bar\n\naxios.interceptors.request.use(config => {\n    NProgress.start();\n    return config;\n});\naxios.interceptors.response.use(config => {\n    NProgress.done();\n    return config;\n}, error => {\n    NProgress.done();\n    return Promise.reject(error.response);\n});\n\nexport default {\n    getUsers(ids) {\n        var requests = ids.map(id => this.requestBpmn(\n            \"identity/users/\" + id\n        ));\n        return Promise.all(requests);\n    },\n    getItem(type, id) {\n        var result;\n        var url = config[type + \"Url\"];\n        return axios.get(url + id).then(response => {\n            result = response;\n            var item = result.data;\n            var ids = [];\n            if (item.createdBy && ids.indexOf(item.createdBy) < 0) {\n                ids.push(item.createdBy);\n            }\n            if (item.updatedBy && ids.indexOf(item.updatedBy) < 0) {\n                ids.push(item.updatedBy);\n            }\n            return this.getUsers(ids);\n        }).then(response => {\n            var item = result.data;\n            var data = response.map(item => item.data);\n            if (item.createdBy) {\n                var user = data.find(user => user.id.toLowerCase() === item.createdBy.toLowerCase());\n                item.createdName = (user.firstName + \" \" + user.lastName).trim();\n            }\n            if (item.updatedBy) {\n                user = data.find(user => user.id.toLowerCase() === item.updatedBy.toLowerCase());\n                item.updatedName = (user.firstName + \" \" + user.lastName).trim();\n            }\n\n            return Promise.resolve(result);\n        });\n    },\n    getItems(type, data) {\n        var url = config[type + \"Url\"];\n        return new Promise((resolve, reject) => {\n            data = data || {};\n            data.filter = data.filter || {};\n            data.filter.type = type;\n            data.filter = JSON.stringify(data.filter);\n\n            if (data.sort) {\n                data.sort = JSON.stringify(data.sort);\n            }\n\n            var settings = {\n                dataType: \"json\",\n                url: url,\n                method: \"get\",\n                params: data\n            };\n            var items = [];\n            return axios(settings).then(response => {\n                items = response.data._embedded;\n                var ids = [];\n                items.forEach(item => {\n                    if (item.createdBy && ids.indexOf(item.createdBy) < 0) {\n                        ids.push(item.createdBy);\n                    }\n                    if (item.updatedBy && ids.indexOf(item.updatedBy) < 0) {\n                        ids.push(item.updatedBy);\n                    }\n                });\n                return this.getUsers(ids);\n                //   resolve(items);\n            }).then(response => {\n                items.forEach(item => {\n                    var data = response.map(item => item.data);\n                    if (item.createdBy) {\n                        var user = data.find(user => user.id.toLowerCase() === item.createdBy.toLowerCase());\n                        item.createdName = (user.firstName + \" \" + user.lastName).trim();\n                    }\n                    if (item.updatedBy) {\n                        user = data.find(user => user.id.toLowerCase() === item.updatedBy.toLowerCase());\n                        item.updatedName = (user.firstName + \" \" + user.lastName).trim();\n                    }\n\n                });\n                resolve(items);\n            });\n        });\n    },\n\n    saveItem(type, item) {\n      return  this.getItems(type, {\n            filter: {\n                name: item.name,\n                _id: {\n                    \"$ne\": item._id\n                }\n            }\n        }).then(response => {\n            if (response && response.length) {\n                return Promise.reject({\n                    message: \"名称\\\"\" + item.name + \"\\\"已存在。\"\n                });\n            } else {\n                return axios({\n                    dataType: \"json\",\n                    url: config[type + \"Url\"],\n                    headers: {\n                        \"Content-Type\": \"application/json\"\n                    },\n                    method: \"post\",\n                    data: item\n                });\n            }\n\n        });\n    },\n    deleteItem(type, id) {\n        var url = config[type + \"Url\"];\n        url += id;\n        var settings = {\n            dataType: \"text\",\n            url: url,\n            method: \"delete\",\n            data: {}\n        };\n\n        return axios(settings);\n    },\n    requestBpmn(path, type, data) {\n        var type = type || \"GET\";\n        var url = config.bpmnUrl + (path || \"\");\n        var settings = {\n            dataType: \"json\",\n            url: url,\n            headers: {\n                \"Authorization\": sessionStorage.getItem(\"token\"),\n                \"Content-Type\": \"application/json\"\n            },\n            method: type\n\n        };\n        if (type === \"GET\") {\n            settings.params = data;\n        } else {\n            settings.data = data;\n        }\n\n        return axios(settings);\n    },\n    upload(formData) {\n        return axios({\n            method: \"post\",\n            url: config.uploadUrl + \"upload\",\n            data: formData,\n            headers: {\n                'Content-Type': 'multipart/form-data'\n            }\n        });\n    },\n    getProcessTemplate(type) {\n        return axios({\n            method: \"get\",\n            url: \"template/\" + type + \".bpmn\",\n            headers: {\n                'Content-Type': 'text'\n            }\n        });\n    }\n}\n"],"sourceRoot":""}